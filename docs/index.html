<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Authenticator.html">Authenticator</a><ul class='methods'><li data-type='method'><a href="Authenticator.html#check">check</a></li><li data-type='method'><a href="Authenticator.html#decode">decode</a></li><li data-type='method'><a href="Authenticator.html#encode">encode</a></li><li data-type='method'><a href="Authenticator.html#generate">generate</a></li><li data-type='method'><a href="Authenticator.html#generateSecret">generateSecret</a></li><li data-type='method'><a href="Authenticator.html#keyuri">keyuri</a></li><li data-type='method'><a href="Authenticator.html#verify">verify</a></li></ul></li><li><a href="HOTP.html">HOTP</a><ul class='methods'><li data-type='method'><a href="HOTP.html#check">check</a></li><li data-type='method'><a href="HOTP.html#generate">generate</a></li><li data-type='method'><a href="HOTP.html#verify">verify</a></li></ul></li><li><a href="OTPUtils.html">OTPUtils</a><ul class='methods'><li data-type='method'><a href="OTPUtils.html#.generateSecret">generateSecret</a></li><li data-type='method'><a href="OTPUtils.html#.hexToInt">hexToInt</a></li><li data-type='method'><a href="OTPUtils.html#.intToHex">intToHex</a></li><li data-type='method'><a href="OTPUtils.html#.isSameToken">isSameToken</a></li><li data-type='method'><a href="OTPUtils.html#.pad">pad</a></li><li data-type='method'><a href="OTPUtils.html#.removeSpaces">removeSpaces</a></li><li data-type='method'><a href="OTPUtils.html#.setsOf">setsOf</a></li><li data-type='method'><a href="OTPUtils.html#.stringToHex">stringToHex</a></li></ul></li><li><a href="TOTP.html">TOTP</a><ul class='methods'><li data-type='method'><a href="TOTP.html#check">check</a></li><li data-type='method'><a href="TOTP.html#generate">generate</a></li><li data-type='method'><a href="TOTP.html#verify">verify</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-authenticator.html">authenticator</a></li><li><a href="module-core_hotpCheck.html">core/hotpCheck</a></li><li><a href="module-core_hotpCounter.html">core/hotpCounter</a></li><li><a href="module-core_hotpDigest.html">core/hotpDigest</a></li><li><a href="module-core_hotpOptions.html">core/hotpOptions</a></li><li><a href="module-core_hotpSecret.html">core/hotpSecret</a></li><li><a href="module-core_hotpToken.html">core/hotpToken</a></li><li><a href="module-core_totpCheck.html">core/totpCheck</a></li><li><a href="module-core_totpCounter.html">core/totpCounter</a></li><li><a href="module-core_totpOptions.html">core/totpOptions</a></li><li><a href="module-core_totpToken.html">core/totpToken</a></li><li><a href="module-hotp.html">hotp</a></li><li><a href="module-impl_authenticator_check.html">impl/authenticator/check</a></li><li><a href="module-impl_authenticator_decodeKey.html">impl/authenticator/decodeKey</a></li><li><a href="module-impl_authenticator_encodeKey.html">impl/authenticator/encodeKey</a></li><li><a href="module-impl_authenticator_keyuri.html">impl/authenticator/keyuri</a></li><li><a href="module-impl_authenticator_token.html">impl/authenticator/token</a></li><li><a href="module-totp.html">totp</a></li><li><a href="module-utils_hexToInt.html">utils/hexToInt</a></li><li><a href="module-utils_intToHex.html">utils/intToHex</a></li><li><a href="module-utils_isSameToken.html">utils/isSameToken</a></li><li><a href="module-utils_leftPad.html">utils/leftPad</a></li><li><a href="module-utils_randomBytes.html">utils/randomBytes</a></li><li><a href="module-utils_removeSpaces.html">utils/removeSpaces</a></li><li><a href="module-utils_secretKey.html">utils/secretKey</a></li><li><a href="module-utils_setsOf.html">utils/setsOf</a></li><li><a href="module-utils_stringToHex.html">utils/stringToHex</a></li><li><a href="module-v2.html">v2</a><ul class='methods'><li data-type='method'><a href="module-v2.html#~Core">Core</a></li><li data-type='method'><a href="module-v2.html#~Goog">Goog</a></li></ul></li></ul>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><h1>otplib</h1><blockquote>
<p>Time-based (TOTP) and HMAC-based (HOTP) One-Time Password library</p>
</blockquote>
<p><a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/v/otplib.svg?style=flat-square" alt="npm"></a>
<a href="https://circleci.com/gh/yeojz/otplib"><img src="https://img.shields.io/circleci/project/github/yeojz/otplib/master.svg?style=flat-square" alt="Build Status"></a>
<a href="https://coveralls.io/github/yeojz/otplib"><img src="https://img.shields.io/coveralls/yeojz/otplib/master.svg?style=flat-square" alt="Coverage Status"></a>
<a href="https://www.npmjs.com/package/otplib"><img src="https://img.shields.io/npm/dt/otplib.svg?style=flat-square" alt="npm downloads"></a>
<a href="https://github.com/yeojz/otplib/blob/master/CONTRIBUTING.md"><img src="https://img.shields.io/badge/PRs-Welcome-ff69b4.svg?style=flat-square" alt="PRs Welcome"></a></p>
<p><img width="150" src="https://yeojz.github.io/otplib/otplib.png" /></p>
<h2>Table of Contents</h2><ul>
<li><a href="#about">About</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#getting-started">Getting Started</a><ul>
<li><a href="#in-node">Using in node</a></li>
<li><a href="#in-browser">Using in browser</a></li>
</ul>
</li>
<li><a href="#notes">Notes</a><ul>
<li><a href="#setting-custom-options">Setting custom options</a></li>
<li><a href="#google-authenticator">Google Authenticator</a></li>
<li><a href="#browser-compatibility">Browser Compatibility</a></li>
</ul>
</li>
<li><a href="#advanced-usage">Advanced Usage</a></li>
<li><a href="https://yeojz.github.io/otplib/docs">Documentation</a></li>
<li><a href="https://yeojz.github.io/otplib">Demo</a></li>
<li><a href="https://github.com/yeojz/otplib/blob/master/CONTRIBUTING.md">Contributing</a></li>
<li><a href="#related">Related</a></li>
</ul>
<h2>About</h2><p><code>otplib</code> is a JavaScript One Time Password (OTP) library. It provides both <code>functions</code> and <code>classes</code>
for dealing with OTP generation and verification.</p>
<p>It was initially created for me to understand how One Time Passwords work in implementation.</p>
<p>It implements:</p>
<ul>
<li><a href="http://tools.ietf.org/html/rfc4226">RFC 4226</a> - <a href="http://en.wikipedia.org/wiki/HMAC-based_One-time_Password_Algorithm">HOTP</a></li>
<li><a href="http://tools.ietf.org/html/rfc6238">RFC 6238</a> - <a href="http://en.wikipedia.org/wiki/Time-based_One-time_Password_Algorithm">TOTP</a></li>
</ul>
<p>The implementations provided here are tested against test vectors provided in their respective RFC specifications. These datasets can be found in the <code>tests/helpers</code> folder.</p>
<ul>
<li><a href="https://github.com/yeojz/otplib/blob/master/tests/helpers/rfc4226.js">RFC 4226 Dataset</a></li>
<li><a href="https://github.com/yeojz/otplib/blob/master/tests/helpers/rfc6238.js">RFC 6238 Dataset</a></li>
</ul>
<p>This library is also compatible with <a href="https://github.com/google/google-authenticator">Google Authenticator</a>, and includes additional methods to allow you to work with Google Authenticator.</p>
<h2>Installation</h2><p>Install the library via:</p>
<pre class="prettyprint source"><code>$ npm install otplib --save</code></pre><p>or</p>
<pre class="prettyprint source"><code>$ yarn add otplib</code></pre><h2>Upgrading</h2><p>This library follows <code>semver</code>. As such, major version bumps usually mean API changes or behavior changes. Please check <a href="https://github.com/yeojz/otplib/wiki/upgrade-notes">upgrade notes</a> for more information, especially before making any major upgrades.</p>
<p>You might also want to check out the release notes associated with each tagged versions in the <a href="https://github.com/yeojz/otplib/releases">releases</a> page.</p>
<h2>Getting Started</h2><h3>In node</h3><pre class="prettyprint source lang-js"><code>import otplib from 'otplib';

const secret = otplib.authenticator.generateSecret();

const token = otplib.authenticator.generate(secret);

const isValid = otplib.authenticator.check(123456, secret);

// or

const isValid = otplib.authenticator.verify({
  secret,
  token: 123456
});</code></pre><p>If you want to include a specific OTP specification, you can import it directly:</p>
<pre class="prettyprint source lang-js"><code>import hotp from 'otplib/hotp';
import totp from 'otplib/totp';
import authenticator from 'otplib/authenticator';</code></pre><p>For ease of use, the default exports are all instantiated instances of their respective classes.
You may access the original classes via:</p>
<pre class="prettyprint source lang-js"><code>import {HOTP} from 'otplib/hotp';
import {TOTP} from 'otplib/totp';
import {Authenticator} from 'otplib/authenticator';</code></pre><p>Do note that if you're using <code>require</code>, you will need to do <code>const otplib = require('otplib').default</code> as the sources are compiled with <a href="https://github.com/babel/babel">babel</a>. Alternatively, the library provides ES5 compat files for some of the main entry points to the library. i.e.</p>
<pre class="prettyprint source lang-js"><code>const otplib = require('otplib').default;
const totp = require('otplib/totp').default;

// same as

const otplib = require('otplib/compat');
const totp = require('otplib/compat/totp');</code></pre><p>All these can be found in the <code>compat</code> folder.</p>
<h3>In browser</h3><p>Compiled versions of the library are also available, which can be useful for quick proof-of-concepts or even login implementations like  WhatsApp / Line etc.</p>
<p>You'll need to add the following scripts to your code:</p>
<pre class="prettyprint source lang-html"><code>&lt;!-- required: common lib -->
&lt;script src=&quot;otplib_common.js&quot;>&lt;/script>

&lt;!-- replace with any of the available files below -->
&lt;script src=&quot;otplib.js&quot;>&lt;/script>

&lt;script type=&quot;text/javascript&quot;>
   // window.otplib or window.otplib_hotp etc
&lt;/script></code></pre><p><strong>Available files:</strong></p>
<ul>
<li><code>otplib.js</code>           - (hotp / totp / google authenticator)</li>
<li><code>otplib_hotp.js</code>      - (hotp)</li>
<li><code>otplib_totp.js</code>      - (totp)</li>
<li><code>otplib_ga.js</code>        - (google authenticator)</li>
<li><code>otplib_otputils.js</code>  - (utilites)</li>
<li><code>otplib_legacy.js</code>    - (v2 interface)</li>
</ul>
<p>You can find these files in <code>node_modules/otplib/dist</code> after you install.
Alternatively, you can get the latest <a href="https://github.com/yeojz/otplib/tree/gh-pages/lib">here</a>.</p>
<p>For a live example, the <a href="https://yeojz.github.io/otplib">project site</a> has been built using <code>otplib.js</code>. The source code can be found <a href="https://github.com/yeojz/otplib/tree/master/site">here</a>.</p>
<h2>Notes</h2><h3>Setting custom options</h3><h4>Class</h4><p>All instantiated classes will have their options inherited from their respective options generator. i.e. HOTP from <code>hotpOptions</code> and TOTP/Authenticator from <code>totpOptions</code>.</p>
<p>All OTP classes have an object setter and getter method to override these default options.</p>
<p>For example,</p>
<pre class="prettyprint source lang-js"><code>import otplib from 'otplib';

// setting
otplib.authenticator.options = {
   step: 30
}

// getting
const opts = otplib.authenticator.options;</code></pre><h4>Methods</h4><p>Most of the core methods take in an object <code>options</code> as their last argument.</p>
<h3>Google Authenticator</h3><p><strong>Base32 Keys and RFC3548</strong></p>
<p>Google Authenticator requires keys to be base32 encoded.
It also requires the base32 encoder to be <a href="http://tools.ietf.org/html/rfc3548">RFC 3548</a> compliant.</p>
<p>OTP calculation will still work should you want to use other base32 encoding methods (like Crockford's Base 32) but it will NOT be compatible with Google Authenticator.</p>
<pre class="prettyprint source lang-js"><code>import authenticator from 'otplib/authenticator';

const secret = authenticator.generateSecret(); // base 32 encoded user secret key
const token = authenticator.generate(secret);</code></pre><h3>Browser Compatibility</h3><p>In order to reduce the size of the browser package, the <code>crypto</code> package has been replaced with a alternative implementation. The current implementation depends on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array">Uint8Array</a> and the browser's native <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/crypto">crypto</a> methods, which may only be available in recent browser versions.</p>
<p>To find out more about the replacements, you can take a look at <code>src/utils/crypto.js</code></p>
<p><strong>Output sizes:</strong></p>
<ul>
<li>with node crypto: ~311Kb</li>
<li>with alternative crypto: ~94.2Kb</li>
</ul>
<p>If you prefer to use node's <code>crypto</code> module instead, you can set the environment variable <code>OTPLIB_WEBPACK_USE_NODE_CRYPTO=true</code> and rebuild the browser distribution.</p>
<p>i.e. <code>OTPLIB_WEBPACK_USE_NODE_CRYPTO=true npm run build:dist</code></p>
<h2>Advanced Usage</h2><p>By default, classes are provided to wrap functionalities and methods into logical groups.
However, they are ultimately just syntax-sugar to the underlying functional steps in OTP generation.</p>
<p>If you prefer a more functional approach compared to classes, you may import them
from their respective folders.</p>
<ul>
<li><code>functions</code> can be found in <code>otplib/core/&lt;FILENAME&gt;</code></li>
<li><code>classes</code> can be found in <code>otplib/classes/&lt;FILENAME&gt;</code></li>
<li><code>utils</code> can be found in <code>otplib/utils/&lt;FILENAME&gt;</code></li>
</ul>
<p>For more information about the methods and available files, check out the <a href="https://yeojz.github.io/otplib/docs">documentation</a>.</p>
<h2>Related</h2><ul>
<li><a href="https://www.github.com/yeojz/otplib-cli">otplib-cli</a> - Command-line OTP</li>
</ul>
<h2>License</h2><p><code>otplib</code> is <a href="./LICENSE">MIT licensed</a></p></article>
    </section>






</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Apr 15 2017 15:58:56 GMT+0000 (UTC) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>